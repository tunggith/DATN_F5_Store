
<!-- Modal -->
<div class="modal fade" id="createDetailModal" tabindex="-1" role="dialog" aria-labelledby="createDetailModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg" role="document"> <!-- Sử dụng modal-lg để tăng kích thước modal nếu cần -->
      <div class="modal-content">
          <div class="modal-header">
              <h5 class="modal-title" id="createDetailModalLabel">Tạo Chi Tiết Sản Phẩm</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
              </button>
          </div>
          <div class="modal-body">
              <form [formGroup]="chiTietSanPhamForm">
                  <div class="form-group">
                      <label for="donGia">Đơn giá</label>
                      <input type="number" id="donGia" class="form-control" formControlName="donGia" placeholder="Nhập đơn giá" required>
                      <div *ngIf="chiTietSanPhamForm.get('donGia')?.invalid && (chiTietSanPhamForm.get('donGia')?.dirty || chiTietSanPhamForm.get('donGia')?.touched)" class="text-danger">
                          Đơn giá phải là số không âm.
                      </div>
                  </div>
                  <div class="form-group">
                      <label for="soLuong">Số lượng</label>
                      <input type="number" id="soLuong" class="form-control" formControlName="soLuong" placeholder="Nhập số lượng" required>
                      <div *ngIf="chiTietSanPhamForm.get('soLuong')?.invalid && (chiTietSanPhamForm.get('soLuong')?.dirty || chiTietSanPhamForm.get('soLuong')?.touched)" class="text-danger">
                          Số lượng phải là số không âm.
                      </div>
                  </div>
                  <div class="form-group">
                      <label>Chọn Màu Sắc <span class="text-danger">*</span></label>
                      <div class="checkbox-group color-size-grid">
                          <div class="color-size-item" *ngFor="let mau of mauSacList">
                              <input 
                                  type="checkbox" 
                                  [value]="mau.id" 
                                  (change)="onMauSacChange(mau.id, $event.target.checked)" 
                                  [checked]="chiTietSanPhamForm.get('mauSacs')?.value.includes(mau.id)">
                              {{ mau.ten }}
                          </div>
                      </div>
                      <div *ngIf="chiTietSanPhamForm.get('mauSacs')?.invalid && (chiTietSanPhamForm.get('mauSacs')?.dirty || chiTietSanPhamForm.get('mauSacs')?.touched)" class="text-danger">
                          Vui lòng chọn ít nhất một màu sắc.
                      </div>
                  </div>
                  <div class="form-group">
                      <label>Chọn Kích Thước <span class="text-danger">*</span></label>
                      <div class="checkbox-group color-size-grid">
                          <div class="color-size-item" *ngFor="let size of sizes">
                              <input 
                                  type="checkbox" 
                                  [value]="size.id" 
                                  (change)="onSizeChange(size.id, $event.target.checked)" 
                                  [checked]="chiTietSanPhamForm.get('sizes')?.value.includes(size.id)">
                              {{ size.ten }}
                          </div>
                      </div>
                      <div *ngIf="chiTietSanPhamForm.get('sizes')?.invalid && (chiTietSanPhamForm.get('sizes')?.dirty || chiTietSanPhamForm.get('sizes')?.touched)" class="text-danger">
                          Vui lòng chọn ít nhất một kích thước.
                      </div>
                  </div>
              </form>
              <!-- Loading Spinner -->
              <div *ngIf="loading" class="loading-spinner">
                  <div class="spinner-border text-primary" role="status">
                      <span class="sr-only">Đang xử lý...</span>
                  </div>
                  <span>Đang xử lý...</span>
              </div>
          </div>
          <div class="modal-footer">
              <button type="button"  data-dismiss="modal">Đóng</button>
              <button [disabled]="!isValidSelection" 
              (click)="renderChiTietSanPham()" 
              class="btn ">Lưu Chi Tiết Sản Phẩm</button>
          </div>
      </div>
  </div>
</div>


<div class="main-content">
  <div class="container-fluid">
<!-- Modal quản lý sản phẩm -->
<div class="modal fade" id="sanPhamModal" tabindex="-1" role="dialog" aria-labelledby="sanPhamModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
      <div class="modal-content">
          <div class="modal-header">
              <h5 class="modal-title" id="sanPhamModalLabel">Quản lý sản phẩm</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
              </button>
          </div>
          <div class="modal-body">
              <form [formGroup]="sanPhamForm" (ngSubmit)="onSubmit()">
                    <div class="form-row">
                      <div class="col-md-6">
                        <div class="form-group">
                            <label for="maSanPham">Mã sản phẩm</label>
                            <input type="text" id="maSanPham" class="form-control" formControlName="maSanPham" placeholder="Mã sản phẩm" required readonly>
                            <div *ngIf="sanPhamForm.get('maSanPham').invalid && (sanPhamForm.get('maSanPham').dirty || sanPhamForm.get('maSanPham').touched)" class="text-danger">
                                <small *ngIf="sanPhamForm.get('maSanPham').errors?.required">Mã sản phẩm là bắt buộc.</small>
                            </div>
                        </div>
                    </div>
                    
                      <div class="col-md-6">
                          <div class="form-group">
                              <label for="tenSanPham">Tên sản phẩm</label>
                              <input type="text" id="tenSanPham" class="form-control" formControlName="tenSanPham" placeholder="Tên sản phẩm" required>
                              <div *ngIf="sanPhamForm.get('tenSanPham').invalid && (sanPhamForm.get('tenSanPham').dirty || sanPhamForm.get('tenSanPham').touched)" class="text-danger">
                                  <small *ngIf="sanPhamForm.get('tenSanPham').errors?.required">Tên sản phẩm là bắt buộc.</small>
                              </div>
                          </div>
                      </div>
                  </div>

                  <div class="form-row">
                      <div class="col-md-6">
                          <div class="form-group">
                              <label for="xuatXu">Xuất xứ</label>
                              <select id="xuatXu" class="form-control" formControlName="xuatXu" required>
                                  <option value="">Chọn xuất xứ</option>
                                  <option *ngFor="let xuatXu of xuatXuList" [value]="xuatXu.id">{{ xuatXu.ten }}</option>
                              </select>
                              <div *ngIf="sanPhamForm.get('xuatXu').invalid && (sanPhamForm.get('xuatXu').dirty || sanPhamForm.get('xuatXu').touched)" class="text-danger">
                                  <small *ngIf="sanPhamForm.get('xuatXu').errors?.required">Xuất xứ là bắt buộc.</small>
                              </div>
                          </div>
                      </div>
                      <div class="col-md-6">
                          <div class="form-group">
                              <label for="thuongHieu">Thương Hiệu</label>
                              <select id="thuongHieu" class="form-control" formControlName="thuongHieu" required>
                                  <option value="">Chọn thương hiệu</option>
                                  <option *ngFor="let thuongHieu of thuongHieuList" [value]="thuongHieu.id">{{ thuongHieu.ten }}</option>
                              </select>
                              <div *ngIf="sanPhamForm.get('thuongHieu').invalid && (sanPhamForm.get('thuongHieu').dirty || sanPhamForm.get('thuongHieu').touched)" class="text-danger">
                                  <small *ngIf="sanPhamForm.get('thuongHieu').errors?.required">Thương hiệu là bắt buộc.</small>
                              </div>
                          </div>
                      </div>
                  </div>

                  <div class="form-row">
                      <div class="col-md-6">
                          <div class="form-group">
                              <label for="gioiTinh">Giới Tính</label>
                              <select id="gioiTinh" class="form-control" formControlName="gioiTinh" required>
                                  <option value="">Chọn giới tính</option>
                                  <option *ngFor="let gioiTinh of gioiTinhList" [value]="gioiTinh.id">{{ gioiTinh.ten }}</option>
                              </select>
                              <div *ngIf="sanPhamForm.get('gioiTinh').invalid && (sanPhamForm.get('gioiTinh').dirty || sanPhamForm.get('gioiTinh').touched)" class="text-danger">
                                  <small *ngIf="sanPhamForm.get('gioiTinh').errors?.required">Giới tính là bắt buộc.</small>
                              </div>
                          </div>
                      </div>
                      <div class="col-md-6">
                          <div class="form-group">
                              <label for="trangThai" class="form-label">Trạng thái</label>
                              <select id="trangThai" class="form-control" formControlName="trangThai" required>
                                  <option value="Đang hoạt động">Đang hoạt động</option>
                                  <option value="Dừng hoạt động">Dừng hoạt động</option>
                              </select>
                          </div>
                      </div>
                  </div>

                  <div class="form-group text-right">
                      <button type="submit" class="btn ">
                          {{ selectedSanPhamId ? 'Cập nhật sản phẩm' : 'Thêm sản phẩm' }}
                      </button>
                      <button type="button" class="btn btn-danger" (click)="resetForm()">Xóa form</button>
                  </div>
              </form>
          </div>
      </div>
  </div>
</div>




<!--  mo dal thuoc tinh -->
<div class="modal fade" id="modalThuocTinh" tabindex="-1" role="dialog" aria-labelledby="modalThuocTinhLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="addAttributeModalLabel">Thêm Thuộc Tính</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form [formGroup]="attributeForm" (ngSubmit)="onSubmitAttribute()">
          <div class="mb-3">
            <label for="attributeType" class="form-label">Loại thuộc tính</label>
            <select id="attributeType" class="form-control" formControlName="type" required>
              <option value="mau-sac">Màu sắc</option>
              <option value="size">Kích thước</option>
              <option value="xuat-xu">Xuất xứ</option>
              <option value="thuong-hieu">Thương hiệu</option>
            </select>
          </div>
          <div class="mb-3">
            <label for="attributeCode" class="form-label">Mã thuộc tính</label>
            <input type="text" id="attributeMa" class="form-control" formControlName="ma" required>
          </div>
          <div class="mb-3">
            <label for="attributeName" class="form-label">Tên thuộc tính</label>

            <input type="text" id="attributeTen" class="form-control" formControlName="ten" required>

          </div>
          <button type="submit" class="btn " (click)="logButtonClick()">Thêm</button>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Thông tin sản phẩm - -->
<div class="row mt-5">
  <div class="col-12">
    <!-- Nút mở modal -->
    <div class="d-flex justify-content-end mb-3">
      <button type="button" click="resetForm()" class="btn " data-toggle="modal" data-target="#sanPhamModal">
          QUẢN LÝ SẢN PHẨM
      </button>
      <!-- Nút mở modal -->
      <button type="button" click="resetForm()" class="btn " data-toggle="modal" data-target="#modalThuocTinh">
        thêm thuộc tính 
    </button>
  </div>
    <!-- Bảng thông tin sản phẩm -->
    <div class="card">
      <div class="card-header card-s">
        <h4 class="card-title"> Danh Sach Thông tin sản phẩm</h4>
        <p class="card-category">Danh sách sản phẩm </p>
      </div>
      <div class="card-body">
        <input type="text" class="form-control mb-3" placeholder="Tìm kiếm sản phẩm theo tên hoặc mã" [(ngModel)]="searchTerm" (ngModelChange)="onSearch($event)">

        <div class="form-row mb-3">
          <div class="col-md-4">
            <select class="form-control" [(ngModel)]="selectedThuongHieu" (change)="filterSanPham()">
              <option value="">Chọn thương hiệu</option>
              <option *ngFor="let thuongHieu of thuongHieuList" [value]="thuongHieu.id">{{ thuongHieu.ten }}</option>
            </select>
          </div>
          <div class="col-md-4">
            <select class="form-control" [(ngModel)]="selectedXuatXu" (change)="filterSanPham()">
              <option value="">Chọn xuất xứ</option>
              <option *ngFor="let xuatXu of xuatXuList" [value]="xuatXu.id">{{ xuatXu.ten }}</option>
            </select>
          </div>
          <div class="col-md-4">
            <select class="form-control" [(ngModel)]="selectedGioiTinh" (change)="filterSanPham()">
              <option value="">Chọn giới tính</option>
              <option *ngFor="let gioiTinh of gioiTinhList" [value]="gioiTinh.id">{{ gioiTinh.ten }}</option>
            </select>
          </div>
        </div>

        <div class="table-responsive">
          <table class="table table-striped">
            <thead class="text-primary">
              <tr>
                <th>ID</th>
                <th>Tên sản phẩm</th>
                <th>Mã sản phẩm</th>
                <th>Xuất xứ</th>
                <th>Thương hiệu</th>
                <th>Giới tính</th>
                <th>Trạng thái</th>
                <th>Thao tác</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let sanpham of filteredSanPhamList">
                <td>{{ sanpham.id }}</td>
                <td>{{ sanpham.ten }}</td>
                <td>{{ sanpham.ma }}</td>
                <td>{{ sanpham.xuatXu?.ten }}</td>
                <td>{{ sanpham.thuongHieu?.ten }}</td>
                <td>{{ sanpham.gioiTinh?.ten }}</td>
                <td>{{ sanpham.trangThai }}</td>
                <td>
                  <button class="btn  btn-sm mb-2" (click)="viewProductDetails(sanpham.id)">
                    <i class="fa fa-eye"></i> Xem chi tiết
                  </button>
                  <button class="btn  btn-sm mb-1"   data-toggle="modal" data-target="#sanPhamModal" (click)="selectSanPham(sanpham)">
                    <i class="fa fa-wrench"></i> Sửa
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <nav aria-label="Page navigation" class="mt-3">
          <ul class="pagination justify-content-center">
            <li class="page-item" [class.disabled]="pageSanPham === 0">
              <a class="page-link" (click)="changePageSanPham(pageSanPham - 1)">Trước</a>
            </li>
            <li class="page-item disabled">
              <span class="page-link">
                Trang {{ pageSanPham + 1 }} / {{ totalPagesSanPham }}
              </span>
            </li>
            <li class="page-item" [class.disabled]="pageSanPham === totalPagesSanPham - 1">
              <a class="page-link" (click)="changePageSanPham(pageSanPham + 1)">Sau</a>
            </li>
          </ul>
        </nav>
        
      </div>
    </div>
  </div>
</div>

  

<!-- Modal Chi Tiết Sản Phẩm -->
<div *ngIf="isChiTietModalOpen"  class="modal-overlay">
  <div class="modal-content">
    <button type="button" class="close-btn" (click)="closeChiTietModal()">×</button>
    <h5 class="modal-title">Chi Tiết Sản Phẩm: {{ selectedSanPhamName }}</h5>
    <!-- Nút mở modal thêm thuộc tính -->
    <button type="button" class="btn  " data-toggle="modal" data-target="#createDetailModal">
      Tạo Chi Tiết Sản Phẩm
    </button>
    <!-- Lọc sản phẩm -->
    <div class="row mb-3">
      <div class="col-md-4">
        <label for="idMauSac" class="form-label">Màu sắc</label>
        <select id="idMauSac" class="form-control" [(ngModel)]="selectedColor" (change)="selectColor($event.target.value)">
          <option value="">Chọn màu sắc</option>
          <option *ngFor="let mau of mauSacList" [value]="mau.id">{{ mau.ten }}</option>
        </select>
      </div>

      <div class="col-md-4">
        <label for="idSize" class="form-label">Kích thước</label>
        <select id="idSize" class="form-control" [(ngModel)]="selectedSize" (change)="selectSize($event.target.value)">
          <option value="">Chọn kích thước</option>
          <option *ngFor="let size of sizes" [value]="size.id">{{ size.ten }}</option>
        </select>
      </div>

      <div class="col-md-4">
        <label for="donGia" class="form-label">Đơn giá</label>
        <input type="number" id="donGia" [(ngModel)]="selectedPrice" (input)="updatePrice($event.target.value)" placeholder="Nhập giá" class="form-control" />
      </div>
    </div>

    <!-- Nội dung chi tiết sản phẩm -->
    <div class="table-responsive">
      <table class="table table-striped">
        <thead class="text-primary">
          <tr>
            <th>mã</th>
            <th>Màu sắc</th>
            <th>Kích thước</th>
            <th>Đơn giá</th>
            <th>Số lượng</th>
            <th>Trạng thái</th>
            <th>Thao tác</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let chiTiet of filteredChiTietSanPhamList">
            <td>{{ chiTiet.ma }}</td>
            <td>{{ chiTiet.mauSac.ten }}</td>
            <td>{{ chiTiet.size.ten }}</td>
            <td>{{ chiTiet.donGia | number: '1.0-0' }}₫</td>            
            <td>{{ chiTiet.soLuong }}</td>
            <td>{{ chiTiet.trangThai }}</td>
            <td>
              <button class="btn  btn-sm" (click)="openUpdateProductDetailModal(chiTiet.id)">Cập nhật</button>
              <button class="btn btn-secondary btn-sm" (click)="openPopup(chiTiet.id)">
                <i class="material-icons">add_photo_alternate</i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <nav aria-label="Page navigation" class="mt-3">
      <ul class="pagination justify-content-center">
          <li class="page-item" [class.disabled]="pageChiTiet === 0">
              <a class="page-link" (click)="changePageChiTiet(pageChiTiet - 1)">Trước</a>
          </li>
          <li class="page-item disabled">
              <span class="page-link">
                  Trang {{ pageChiTiet + 1 }} / {{ totalPagesChiTiet }}
              </span>
          </li>
          <li class="page-item" [class.disabled]="pageChiTiet === totalPagesChiTiet - 1">
              <a class="page-link" (click)="changePageChiTiet(pageChiTiet + 1)">Sau</a>
          </li>
      </ul>
  </nav>
  
  
  
  
  
    
    

<!-- Modal thêm chi tiết sản phẩm -->
<div *ngIf="isAddProductDetailModalOpen" class="custom-modal-overlay">
  <div class="custom-modal">
    <div class="modal-header">
     
      <h5 style="font-weight: bold;" class="modal-title"> Thêm chi tiết sản phẩm: {{ selectedSanPhamName }}</h5>
      <button type="button" class="close" (click)="closeModal()">×</button>
    </div>
    <div class="modal-body">
      <!-- Hiển thị ID sản phẩm đã chọn -->
      <div class="mb-3">
        <label for="sanPhamId" class="form-label">ID Sản Phẩm</label>
        <input type="text" id="sanPhamId" class="form-control" [value]="selectedSanPhamId" readonly>
      </div>

      <form [formGroup]="chiTietSanPhamForm" (ngSubmit)="onSubmitChiTietSanPham()">
          <div class="mb-3">
          <label for="idMauSac" class="form-label">Màu sắc</label>
          <select id="idMauSac" class="form-control" formControlName="idMauSac" required>
            <option value="">Chọn màu sắc</option>
            <option *ngFor="let mau of mauSacList" [value]="mau.id">{{ mau.ten }}</option>
          </select>
          <div *ngIf="chiTietSanPhamForm.get('idMauSac').invalid && (chiTietSanPhamForm.get('idMauSac').dirty || chiTietSanPhamForm.get('idMauSac').touched)" class="text-danger">
            <small *ngIf="chiTietSanPhamForm.get('idMauSac').errors?.required">Màu sắc là bắt buộc.</small>
          </div>
        </div>

        <div class="mb-3">
          <label for="idSize" class="form-label">Kích thước</label>
          <select id="idSize" class="form-control" formControlName="idSize" required>
            <option value="">Chọn kích thước</option>
            <option *ngFor="let size of sizes" [value]="size.id">{{ size.ten }}</option>
          </select>
          <div *ngIf="chiTietSanPhamForm.get('idSize').invalid && (chiTietSanPhamForm.get('idSize').dirty || chiTietSanPhamForm.get('idSize').touched)" class="text-danger">
            <small *ngIf="chiTietSanPhamForm.get('idSize').errors?.required">Kích thước là bắt buộc.</small>
          </div>
        </div>

        <div class="mb-3">
          <label for="donGia" class="form-label">Đơn giá</label>
          <input type="number" id="donGia" class="form-control" formControlName="donGia" required>
          <div *ngIf="chiTietSanPhamForm.get('donGia').invalid && (chiTietSanPhamForm.get('donGia').dirty || chiTietSanPhamForm.get('donGia').touched)" class="text-danger">
            <small *ngIf="chiTietSanPhamForm.get('donGia').errors?.required">Đơn giá là bắt buộc.</small>
          </div>
        </div>

        <div class="mb-3">
          <label for="soLuong" class="form-label">Số lượng</label>
          <input type="number" id="soLuong" class="form-control" formControlName="soLuong" required>
          <div *ngIf="chiTietSanPhamForm.get('soLuong').invalid && (chiTietSanPhamForm.get('soLuong').dirty || chiTietSanPhamForm.get('soLuong').touched)" class="text-danger">
            <small *ngIf="chiTietSanPhamForm.get('soLuong').errors?.required">Số lượng là bắt buộc.</small>
          </div>
        </div>

        <button type="submit" class="btn ">Thêm Chi Tiết</button>
      </form>
    </div>
  </div>
</div>









<!-- Modal cập nhật chi tiết sản phẩm -->
<div *ngIf="isUpdateProductDetailModalOpen" class="custom-modal-overlay">
  <div class="custom-modal">
    <div class="modal-header">
      <h5 style="font-weight: bold;" class="modal-title">Cập nhật Chi Tiết Sản Phẩm: {{ selectedSanPhamName }}</h5>
      <button type="button" class="close" (click)="closeUpdateModal()">×</button>
    </div>
    <div class="modal-body">
      <form [formGroup]="chiTietSanPhamForm" (ngSubmit)="onSubmitUpdateChiTietSanPham()">
        <div class="mb-3">
          <label for="idMauSac" class="form-label">Màu sắc</label>
          <select id="idMauSac" class="form-control" formControlName="idMauSac" required>
            <option *ngFor="let mau of mauSacList" [value]="mau.id">{{ mau.ten }}</option>
          </select>
        </div>

        <div class="mb-3">
          <label for="idSize" class="form-label">Kích thước</label>
          <select id="idSize" class="form-control" formControlName="idSize" required>
            <option *ngFor="let size of sizes" [value]="size.id">{{ size.ten }}</option>
          </select>
        </div>

        <div class="mb-3">
          <label for="donGia" class="form-label">Đơn giá</label>
          <input type="number" id="donGia" class="form-control" formControlName="donGia" required>
        </div>

        <div class="mb-3">
          <label for="soLuong" class="form-label">Số lượng</label>
          <input type="number" id="soLuong" class="form-control" formControlName="soLuong" required>
        </div>
        <button type="submit" class="btn ">Cập nhật Chi Tiết</button>
      </form>
    </div>
  </div>
</div>



<div *ngIf="loading" class="loading-spinner">
  <div class="spinner-border" role="status">
      <span class="sr-only">Loading...</span>
  </div>
  <p>Đang xử lý...</p>
</div>

<!-- Modal reander chi tiết sản phẩm -->
<div class="modal fade" id="createDetailModal" tabindex="-1" role="dialog" aria-labelledby="createDetailModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg" role="document"> <!-- Sử dụng modal-lg để tăng kích thước modal nếu cần -->
      <div class="modal-content">
          <div class="modal-header">
              <h5 class="modal-title" id="createDetailModalLabel">Tạo Chi Tiết Sản Phẩm</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
              </button>
          </div>
          <div class="modal-body">
              <form [formGroup]="chiTietSanPhamForm">
                  <div class="form-group">
                      <label for="donGia">Đơn giá</label>
                      <input type="number" id="donGia" class="form-control" formControlName="donGia" placeholder="Nhập đơn giá" required>
                      <div *ngIf="chiTietSanPhamForm.get('donGia')?.invalid && (chiTietSanPhamForm.get('donGia')?.dirty || chiTietSanPhamForm.get('donGia')?.touched)" class="text-danger">
                          Đơn giá phải là số không âm.
                      </div>
                  </div>
                  <div class="form-group">
                      <label for="soLuong">Số lượng</label>
                      <input type="number" id="soLuong" class="form-control" formControlName="soLuong" placeholder="Nhập số lượng" required>
                      <div *ngIf="chiTietSanPhamForm.get('soLuong')?.invalid && (chiTietSanPhamForm.get('soLuong')?.dirty || chiTietSanPhamForm.get('soLuong')?.touched)" class="text-danger">
                          Số lượng phải là số không âm.
                      </div>
                  </div>
                  <div class="form-group">
                      <label>Chọn Màu Sắc <span class="text-danger">*</span></label>
                      <div class="checkbox-group color-size-grid">
                          <div class="color-size-item" *ngFor="let mau of mauSacList">
                              <input 
                                  type="checkbox" 
                                  [value]="mau.id" 
                                  (change)="onMauSacChange(mau.id, $event.target.checked)" 
                                  [checked]="chiTietSanPhamForm.get('mauSacs')?.value.includes(mau.id)">
                              {{ mau.ten }}
                          </div>
                      </div>
                      <div *ngIf="chiTietSanPhamForm.get('mauSacs')?.invalid && (chiTietSanPhamForm.get('mauSacs')?.dirty || chiTietSanPhamForm.get('mauSacs')?.touched)" class="text-danger">
                          Vui lòng chọn ít nhất một màu sắc.
                      </div>
                  </div>
                  <div class="form-group">
                      <label>Chọn Kích Thước <span class="text-danger">*</span></label>
                      <div class="checkbox-group color-size-grid">
                          <div class="color-size-item" *ngFor="let size of sizes">
                              <input 
                                  type="checkbox" 
                                  [value]="size.id" 
                                  (change)="onSizeChange(size.id, $event.target.checked)" 
                                  [checked]="chiTietSanPhamForm.get('sizes')?.value.includes(size.id)">
                              {{ size.ten }}
                          </div>
                      </div>
                      <div *ngIf="chiTietSanPhamForm.get('sizes')?.invalid && (chiTietSanPhamForm.get('sizes')?.dirty || chiTietSanPhamForm.get('sizes')?.touched)" class="text-danger">
                          Vui lòng chọn ít nhất một kích thước.
                      </div>
                  </div>
              </form>
              <!-- Loading Spinner -->
              <div *ngIf="loading" class="loading-spinner">
                  <div class="spinner-border text-primary" role="status">
                      <span class="sr-only">Đang xử lý...</span>
                  </div>
                  <span>Đang xử lý...</span>
              </div>
          </div>
          <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Đóng</button>
              <button [disabled]="!isValidSelection" 
              (click)="renderChiTietSanPham()" 
              class="btn ">Lưu Chi Tiết Sản Phẩm</button>
          </div>
      </div>
  </div>
</div>



  </div>
</div>


