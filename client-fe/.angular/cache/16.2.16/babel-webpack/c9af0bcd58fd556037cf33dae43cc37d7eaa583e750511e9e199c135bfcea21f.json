{"ast":null,"code":"import Swal from \"sweetalert2\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/service/authentication.service\";\nimport * as i2 from \"src/app/service/notification.service\";\nimport * as i3 from \"src/app/service/customer.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"../overlay/overlay.component\";\nfunction ProfileSidebarComponent_button_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 21);\n    i0.ɵɵlistener(\"click\", function ProfileSidebarComponent_button_7_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.updateAvatar());\n    });\n    i0.ɵɵtext(1, \" C\\u1EADp nh\\u1EADt \\u1EA3nh \\u0111\\u1EA1i di\\u1EC7n \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProfileSidebarComponent_button_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 22);\n    i0.ɵɵlistener(\"click\", function ProfileSidebarComponent_button_8_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.cancelUpdateAvatar());\n    });\n    i0.ɵɵtext(1, \" H\\u1EE7y \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProfileSidebarComponent_app_overlay_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-overlay\", 23);\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"text\", ctx_r2.overlayText);\n  }\n}\nexport class ProfileSidebarComponent {\n  constructor(authService, notifService, customerService) {\n    this.authService = authService;\n    this.notifService = notifService;\n    this.customerService = customerService;\n    this.isLoadding = false;\n    this.overlayText = \"\";\n  }\n  ngOnInit() {\n    this.loggedCust = this.authService.getCustomerFromStorage();\n  }\n  // public functions\n  //\n  openFileInput() {\n    document.getElementById(\"fileInput\").click();\n  }\n  //\n  imageChange(event, thumnailId) {\n    this.selectFile = event.target[\"files\"][0];\n    this.showImageThumbnail(this.selectFile, thumnailId);\n    this.notifService.success(\"Bạn vừa chọn ảnh diện mới! Nhấn cập nhật để lưu thay đổi.\");\n  }\n  //\n  cancelUpdateAvatar() {\n    this.selectFile = null;\n    document.getElementById(\"avatar\")[\"src\"] = this.loggedCust.image.imageUrl;\n    this.notifService.success(\"Bạn đã hủy cập nhật ảnh!\");\n  }\n  //\n  updateAvatar() {\n    Swal.fire({\n      title: \"Cập nhật ảnh đại diện?\",\n      cancelButtonText: \"Hủy\",\n      icon: \"warning\",\n      showCancelButton: true,\n      confirmButtonColor: \"#3085d6\",\n      cancelButtonColor: \"#d33\",\n      confirmButtonText: \"Cập nhật\"\n    }).then(result => {\n      if (result.isConfirmed) {\n        this.turnOnOverlay(\"Đang cập nhật...\");\n        this.customerService.updateAvatar(this.loggedCust.id, this.selectFile).subscribe({\n          next: cust => {\n            this.authService.saveCustomerToStorage(cust);\n            this.selectFile = null;\n            this.notifService.success(\"Cập nhật ảnh đại diện thành công!\");\n            this.turnOffOverlay(\"\");\n          },\n          error: errRes => {\n            this.notifService.error(errRes.error.message);\n            this.turnOffOverlay(\"\");\n          }\n        });\n      }\n    });\n  }\n  // private functions\n  //\n  showImageThumbnail(file, thumnailId) {\n    let reader = new FileReader();\n    reader.onload = e => {\n      document.getElementById(thumnailId)[\"src\"] = e.target.result;\n    };\n    reader.readAsDataURL(file);\n  }\n  //\n  turnOnOverlay(text) {\n    this.overlayText = text;\n    this.isLoadding = true;\n  }\n  // 15\n  turnOffOverlay(text) {\n    this.overlayText = text;\n    this.isLoadding = false;\n  }\n  static #_ = this.ɵfac = function ProfileSidebarComponent_Factory(t) {\n    return new (t || ProfileSidebarComponent)(i0.ɵɵdirectiveInject(i1.AuthenticationService), i0.ɵɵdirectiveInject(i2.NotificationService), i0.ɵɵdirectiveInject(i3.CustomerService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ProfileSidebarComponent,\n    selectors: [[\"app-profile-sidebar\"]],\n    decls: 30,\n    vars: 5,\n    consts: [[1, \"info\"], [1, \"imgCustomer\"], [\"id\", \"avatar\", \"title\", \"Nh\\u1EA5p \\u0111\\u1EC3 thay \\u1EA3nh \\u0111\\u1EA1i di\\u1EC7n\", 1, \"pointer\", 3, \"src\", \"click\"], [\"id\", \"fileInput\", \"type\", \"file\", \"hidden\", \"\", \"accept\", \"image/*\", 3, \"change\"], [1, \"nameCustomer\"], [1, \"text-center\"], [\"class\", \"btn btn-primary me-1\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"btn btn-danger\", 3, \"click\", 4, \"ngIf\"], [\"href\", \"profile/my-account/\"], [1, \"bi\", \"bi-pencil-square\"], [1, \"listChucNang\"], [\"routerLink\", \"/profile/my-account\", \"routerLinkActive\", \"active\", 1, \"itemChucNang\", \"pointer\", \"rounded\"], [1, \"bi\", \"bi-credit-card-2-back\"], [\"routerLink\", \"/profile/my-discounts\", \"routerLinkActive\", \"active\", 1, \"itemChucNang\", \"pointer\", \"rounded\"], [\"routerLink\", \"/profile/my-orders\", \"routerLinkActive\", \"active\", 1, \"itemChucNang\", \"pointer\", \"rounded\"], [1, \"bi\", \"bi-box-seam\"], [\"routerLink\", \"/profile/my-addresses\", \"routerLinkActive\", \"active\", 1, \"itemChucNang\", \"pointer\", \"rounded\"], [1, \"bi\", \"bi-geo-alt\"], [\"routerLink\", \"/profile/change-password\", \"routerLinkActive\", \"active\", 1, \"itemChucNang\", \"pointer\", \"rounded\"], [1, \"bi\", \"bi-shield-lock\"], [3, \"text\", 4, \"ngIf\"], [1, \"btn\", \"btn-primary\", \"me-1\", 3, \"click\"], [1, \"btn\", \"btn-danger\", 3, \"click\"], [3, \"text\"]],\n    template: function ProfileSidebarComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"img\", 2);\n        i0.ɵɵlistener(\"click\", function ProfileSidebarComponent_Template_img_click_2_listener() {\n          return ctx.openFileInput();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"input\", 3);\n        i0.ɵɵlistener(\"change\", function ProfileSidebarComponent_Template_input_change_3_listener($event) {\n          return ctx.imageChange($event, \"avatar\");\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(4, \"div\", 4)(5, \"div\", 5)(6, \"div\");\n        i0.ɵɵtemplate(7, ProfileSidebarComponent_button_7_Template, 2, 0, \"button\", 6);\n        i0.ɵɵtemplate(8, ProfileSidebarComponent_button_8_Template, 2, 0, \"button\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"span\");\n        i0.ɵɵtext(10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"a\", 8);\n        i0.ɵɵelement(12, \"i\", 9);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(13, \"ul\", 10)(14, \"li\", 11);\n        i0.ɵɵelement(15, \"i\", 12);\n        i0.ɵɵtext(16, \" Th\\u00F4ng tin t\\u00E0i kho\\u1EA3n \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"li\", 13);\n        i0.ɵɵelement(18, \"i\", 12);\n        i0.ɵɵtext(19, \" M\\u00E3 \\u01B0u \\u0111\\u00E3i c\\u1EE7a t\\u00F4i \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"li\", 14);\n        i0.ɵɵelement(21, \"i\", 15);\n        i0.ɵɵtext(22, \" \\u0110\\u01A1n h\\u00E0ng c\\u1EE7a t\\u00F4i \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"li\", 16);\n        i0.ɵɵelement(24, \"i\", 17);\n        i0.ɵɵtext(25, \" S\\u1ED5 \\u0111\\u1ECBa ch\\u1EC9 \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"li\", 18);\n        i0.ɵɵelement(27, \"i\", 19);\n        i0.ɵɵtext(28, \" \\u0110\\u1ED5i m\\u1EADt kh\\u1EA9u \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(29, ProfileSidebarComponent_app_overlay_29_Template, 1, 1, \"app-overlay\", 20);\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"src\", ctx.loggedCust.image.imageUrl, i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ctx.selectFile);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.selectFile);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.loggedCust.hoTen);\n        i0.ɵɵadvance(19);\n        i0.ɵɵproperty(\"ngIf\", ctx.isLoadding);\n      }\n    },\n    dependencies: [i4.NgIf, i5.RouterLink, i5.RouterLinkActive, i6.OverlayComponent],\n    styles: [\".wrapperChucNang[_ngcontent-%COMP%] {\\n  border: 1px solid #b9b9b9;\\n  border-radius: 5px;\\n}\\n\\n.imgCustomer[_ngcontent-%COMP%] {\\n  position: relative;\\n  width: 70px;\\n  height: 70px;\\n  border: 3px solid #ffc700;\\n  border-radius: 50%;\\n  overflow: hidden;\\n}\\n\\n.info[_ngcontent-%COMP%] {\\n  height: 100px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n}\\n\\n.imgCustomer[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\\n  position: absolute;\\n  width: 100%;\\n  top: 0;\\n}\\n\\n.nameCustomer[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n}\\n\\n.nameCustomer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\n  font-size: 18px;\\n  font-weight: 500;\\n  margin-right: 5px;\\n}\\n\\n.listChucNang[_ngcontent-%COMP%] {\\n  list-style: none;\\n  padding: 0;\\n}\\n\\n.itemChucNang[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n  margin: 15px 0;\\n  padding-left: 5px;\\n}\\n\\n\\n\\n\\n\\n\\n\\n.itemChucNang[_ngcontent-%COMP%]  {\\n \\n  color: black;\\n \\n  font-size: 16px;\\n}\\n\\n\\n.itemChucNang[_ngcontent-%COMP%]   i[_ngcontent-%COMP%] {\\n  font-size: 25px;\\n  margin-right: 5px;\\n}\\n\\n.chiTieu[_ngcontent-%COMP%] {\\n  display: grid;\\n  grid-template-columns: 1fr 1fr;\\n  background-color: black;\\n  background-position: center;\\n  background-repeat: no-repeat;\\n  background-size: 100%;\\n  height: 80px;\\n  border-radius: 10px;\\n  padding: 10px;\\n  margin: 15px 0;\\n}\\n\\n.chiTieu[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] {\\n  color: white;\\n  font-size: 15px;\\n  font-weight: 500;\\n}\\n.daMua[_ngcontent-%COMP%], .spDaMua[_ngcontent-%COMP%] {\\n  text-align: end;\\n}\\n\\n.wrapperTaiKhoan[_ngcontent-%COMP%] {\\n  border: 1px solid #b9b9b9;\\n  border-radius: 5px;\\n  margin-left: 10px;\\n}\\n\\n.pointer[_ngcontent-%COMP%] {\\n  cursor: pointer;\\n}\\n\\n.active[_ngcontent-%COMP%] {\\n  background-color: #000000;\\n color: white;\\n}\\n\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcHJvZmlsZS9wcm9maWxlLXNpZGViYXIvcHJvZmlsZS1zaWRlYmFyLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSx5QkFBeUI7RUFDekIsa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFdBQVc7RUFDWCxZQUFZO0VBQ1oseUJBQXlCO0VBQ3pCLGtCQUFrQjtFQUNsQixnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsYUFBYTtFQUNiLG1CQUFtQjtFQUNuQix1QkFBdUI7QUFDekI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsV0FBVztFQUNYLE1BQU07QUFDUjs7QUFFQTtFQUNFLGFBQWE7RUFDYix1QkFBdUI7RUFDdkIsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsZUFBZTtFQUNmLGdCQUFnQjtFQUNoQixpQkFBaUI7QUFDbkI7O0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsVUFBVTtBQUNaOztBQUVBO0VBQ0UsYUFBYTtFQUNiLG1CQUFtQjtFQUNuQixjQUFjO0VBQ2QsaUJBQWlCO0FBQ25COztBQUVBOzs7R0FHRzs7QUFFSDs7RUFFRSxZQUFZOztFQUVaLGVBQWU7QUFDakI7OztBQUdBO0VBQ0UsZUFBZTtFQUNmLGlCQUFpQjtBQUNuQjs7QUFFQTtFQUNFLGFBQWE7RUFDYiw4QkFBOEI7RUFDOUIsdUJBQXVCO0VBQ3ZCLDJCQUEyQjtFQUMzQiw0QkFBNEI7RUFDNUIscUJBQXFCO0VBQ3JCLFlBQVk7RUFDWixtQkFBbUI7RUFDbkIsYUFBYTtFQUNiLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSxZQUFZO0VBQ1osZUFBZTtFQUNmLGdCQUFnQjtBQUNsQjtBQUNBOztFQUVFLGVBQWU7QUFDakI7O0FBRUE7RUFDRSx5QkFBeUI7RUFDekIsa0JBQWtCO0VBQ2xCLGlCQUFpQjtBQUNuQjs7QUFFQTtFQUNFLGVBQWU7QUFDakI7O0FBRUE7RUFDRSx5QkFBeUI7Q0FDMUIsWUFBWTtBQUNiIiwic291cmNlc0NvbnRlbnQiOlsiLndyYXBwZXJDaHVjTmFuZyB7XHJcbiAgYm9yZGVyOiAxcHggc29saWQgI2I5YjliOTtcclxuICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbn1cclxuXHJcbi5pbWdDdXN0b21lciB7XHJcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gIHdpZHRoOiA3MHB4O1xyXG4gIGhlaWdodDogNzBweDtcclxuICBib3JkZXI6IDNweCBzb2xpZCAjZmZjNzAwO1xyXG4gIGJvcmRlci1yYWRpdXM6IDUwJTtcclxuICBvdmVyZmxvdzogaGlkZGVuO1xyXG59XHJcblxyXG4uaW5mbyB7XHJcbiAgaGVpZ2h0OiAxMDBweDtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbn1cclxuXHJcbi5pbWdDdXN0b21lciBpbWcge1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICB3aWR0aDogMTAwJTtcclxuICB0b3A6IDA7XHJcbn1cclxuXHJcbi5uYW1lQ3VzdG9tZXIge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxufVxyXG5cclxuLm5hbWVDdXN0b21lciBzcGFuIHtcclxuICBmb250LXNpemU6IDE4cHg7XHJcbiAgZm9udC13ZWlnaHQ6IDUwMDtcclxuICBtYXJnaW4tcmlnaHQ6IDVweDtcclxufVxyXG5cclxuLmxpc3RDaHVjTmFuZyB7XHJcbiAgbGlzdC1zdHlsZTogbm9uZTtcclxuICBwYWRkaW5nOiAwO1xyXG59XHJcblxyXG4uaXRlbUNodWNOYW5nIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgbWFyZ2luOiAxNXB4IDA7XHJcbiAgcGFkZGluZy1sZWZ0OiA1cHg7XHJcbn1cclxuXHJcbi8qIC5pdGVtQ2h1Y05hbmc6aG92ZXIge1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYigyMTQsIDIxNCwgMjE0KTtcclxuICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbn0gKi9cclxuXHJcbi5pdGVtQ2h1Y05hbmcgIHtcclxuIFxyXG4gIGNvbG9yOiBibGFjaztcclxuIFxyXG4gIGZvbnQtc2l6ZTogMTZweDtcclxufVxyXG5cclxuXHJcbi5pdGVtQ2h1Y05hbmcgaSB7XHJcbiAgZm9udC1zaXplOiAyNXB4O1xyXG4gIG1hcmdpbi1yaWdodDogNXB4O1xyXG59XHJcblxyXG4uY2hpVGlldSB7XHJcbiAgZGlzcGxheTogZ3JpZDtcclxuICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogYmxhY2s7XHJcbiAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyO1xyXG4gIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7XHJcbiAgYmFja2dyb3VuZC1zaXplOiAxMDAlO1xyXG4gIGhlaWdodDogODBweDtcclxuICBib3JkZXItcmFkaXVzOiAxMHB4O1xyXG4gIHBhZGRpbmc6IDEwcHg7XHJcbiAgbWFyZ2luOiAxNXB4IDA7XHJcbn1cclxuXHJcbi5jaGlUaWV1IGRpdiB7XHJcbiAgY29sb3I6IHdoaXRlO1xyXG4gIGZvbnQtc2l6ZTogMTVweDtcclxuICBmb250LXdlaWdodDogNTAwO1xyXG59XHJcbi5kYU11YSxcclxuLnNwRGFNdWEge1xyXG4gIHRleHQtYWxpZ246IGVuZDtcclxufVxyXG5cclxuLndyYXBwZXJUYWlLaG9hbiB7XHJcbiAgYm9yZGVyOiAxcHggc29saWQgI2I5YjliOTtcclxuICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgbWFyZ2luLWxlZnQ6IDEwcHg7XHJcbn1cclxuXHJcbi5wb2ludGVyIHtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuXHJcbi5hY3RpdmUge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICMwMDAwMDA7XHJcbiBjb2xvcjogd2hpdGU7XHJcbn1cclxuXHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n  });\n}","map":{"version":3,"names":["Swal","i0","ɵɵelementStart","ɵɵlistener","ProfileSidebarComponent_button_7_Template_button_click_0_listener","ɵɵrestoreView","_r4","ctx_r3","ɵɵnextContext","ɵɵresetView","updateAvatar","ɵɵtext","ɵɵelementEnd","ProfileSidebarComponent_button_8_Template_button_click_0_listener","_r6","ctx_r5","cancelUpdateAvatar","ɵɵelement","ɵɵproperty","ctx_r2","overlayText","ProfileSidebarComponent","constructor","authService","notifService","customerService","isLoadding","ngOnInit","loggedCust","getCustomerFromStorage","openFileInput","document","getElementById","click","imageChange","event","thumnailId","selectFile","target","showImageThumbnail","success","image","imageUrl","fire","title","cancelButtonText","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","then","result","isConfirmed","turnOnOverlay","id","subscribe","next","cust","saveCustomerToStorage","turnOffOverlay","error","errRes","message","file","reader","FileReader","onload","e","readAsDataURL","text","_","ɵɵdirectiveInject","i1","AuthenticationService","i2","NotificationService","i3","CustomerService","_2","selectors","decls","vars","consts","template","ProfileSidebarComponent_Template","rf","ctx","ProfileSidebarComponent_Template_img_click_2_listener","ProfileSidebarComponent_Template_input_change_3_listener","$event","ɵɵtemplate","ProfileSidebarComponent_button_7_Template","ProfileSidebarComponent_button_8_Template","ProfileSidebarComponent_app_overlay_29_Template","ɵɵadvance","ɵɵsanitizeUrl","ɵɵtextInterpolate","hoTen"],"sources":["E:\\Du_An_Tot_Nghiep\\DATN_F5_Store\\client-fe\\src\\app\\profile\\profile-sidebar\\profile-sidebar.component.ts","E:\\Du_An_Tot_Nghiep\\DATN_F5_Store\\client-fe\\src\\app\\profile\\profile-sidebar\\profile-sidebar.component.html"],"sourcesContent":["import { Component } from \"@angular/core\";\r\n\r\nimport Swal, { SweetAlertResult } from \"sweetalert2\";\r\n\r\nimport { Customer } from \"src/app/model/class/customer.class\";\r\nimport { AuthenticationService } from \"src/app/service/authentication.service\";\r\nimport { CustomerService } from \"src/app/service/customer.service\";\r\nimport { NotificationService } from \"src/app/service/notification.service\";\r\nimport { HttpErrorResponse } from \"@angular/common/http\";\r\n\r\n@Component({\r\n  selector: \"app-profile-sidebar\",\r\n  templateUrl: \"./profile-sidebar.component.html\",\r\n  styleUrls: [\"./profile-sidebar.component.css\"],\r\n})\r\nexport class ProfileSidebarComponent {\r\n  public isLoadding = false;\r\n  public overlayText: string = \"\";\r\n  public loggedCust: Customer;\r\n  public selectFile: File;\r\n\r\n  constructor(\r\n    private authService: AuthenticationService,\r\n    private notifService: NotificationService,\r\n    private customerService: CustomerService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.loggedCust = this.authService.getCustomerFromStorage();\r\n  }\r\n\r\n  // public functions\r\n  //\r\n  public openFileInput(): void {\r\n    document.getElementById(\"fileInput\").click();\r\n  }\r\n\r\n  //\r\n  public imageChange(event: any, thumnailId: string): void {\r\n    this.selectFile = event.target[\"files\"][0];\r\n    this.showImageThumbnail(this.selectFile, thumnailId);\r\n    this.notifService.success(\r\n      \"Bạn vừa chọn ảnh diện mới! Nhấn cập nhật để lưu thay đổi.\"\r\n    );\r\n  }\r\n\r\n  //\r\n  public cancelUpdateAvatar(): void {\r\n    this.selectFile = null;\r\n    (document.getElementById(\"avatar\") as HTMLImageElement)[\"src\"] =\r\n      this.loggedCust.image.imageUrl;\r\n    this.notifService.success(\"Bạn đã hủy cập nhật ảnh!\");\r\n  }\r\n\r\n  //\r\n  public updateAvatar(): void {\r\n    Swal.fire({\r\n      title: \"Cập nhật ảnh đại diện?\",\r\n      cancelButtonText: \"Hủy\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#3085d6\",\r\n      cancelButtonColor: \"#d33\",\r\n      confirmButtonText: \"Cập nhật\",\r\n    }).then((result: SweetAlertResult) => {\r\n      if (result.isConfirmed) {\r\n        this.turnOnOverlay(\"Đang cập nhật...\");\r\n        this.customerService\r\n          .updateAvatar(this.loggedCust.id, this.selectFile)\r\n          .subscribe({\r\n            next: (cust: Customer) => {\r\n              this.authService.saveCustomerToStorage(cust);\r\n              this.selectFile = null;\r\n              this.notifService.success(\"Cập nhật ảnh đại diện thành công!\");\r\n              this.turnOffOverlay(\"\");\r\n            },\r\n            error: (errRes: HttpErrorResponse) => {\r\n              this.notifService.error(errRes.error.message);\r\n              this.turnOffOverlay(\"\");\r\n            },\r\n          });\r\n      }\r\n    });\r\n  }\r\n\r\n  // private functions\r\n  //\r\n  private showImageThumbnail(file: File, thumnailId: string): void {\r\n    let reader = new FileReader();\r\n    reader.onload = (e) => {\r\n      (document.getElementById(thumnailId) as HTMLImageElement)[\"src\"] = e\r\n        .target.result as string;\r\n    };\r\n    reader.readAsDataURL(file);\r\n  }\r\n\r\n  //\r\n  private turnOnOverlay(text: string): void {\r\n    this.overlayText = text;\r\n    this.isLoadding = true;\r\n  }\r\n\r\n  // 15\r\n  private turnOffOverlay(text: string): void {\r\n    this.overlayText = text;\r\n    this.isLoadding = false;\r\n  }\r\n}\r\n","<div class=\"info\">\r\n  <div class=\"imgCustomer\">\r\n    <img\r\n      id=\"avatar\"\r\n      class=\"pointer\"\r\n      [src]=\"loggedCust.image.imageUrl\"\r\n      (click)=\"openFileInput()\"\r\n      title=\"Nhấp để thay ảnh đại diện\"\r\n    />\r\n\r\n    <input\r\n      id=\"fileInput\"\r\n      type=\"file\"\r\n      hidden\r\n      accept=\"image/*\"\r\n      (change)=\"imageChange($event, 'avatar')\"\r\n    />\r\n  </div>\r\n</div>\r\n\r\n<div class=\"nameCustomer\">\r\n  <div class=\"text-center\">\r\n    <div>\r\n      <button\r\n        class=\"btn btn-primary me-1\"\r\n        *ngIf=\"selectFile\"\r\n        (click)=\"updateAvatar()\"\r\n      >\r\n        Cập nhật ảnh đại diện\r\n      </button>\r\n      <button\r\n        class=\"btn btn-danger\"\r\n        *ngIf=\"selectFile\"\r\n        (click)=\"cancelUpdateAvatar()\"\r\n      >\r\n        Hủy\r\n      </button>\r\n    </div>\r\n    <span>{{ loggedCust.hoTen }}</span>\r\n    <a href=\"profile/my-account/\"><i class=\"bi bi-pencil-square\"></i></a>\r\n  </div>\r\n</div>\r\n\r\n<ul class=\"listChucNang\">\r\n  <li\r\n    class=\"itemChucNang pointer rounded\"\r\n    routerLink=\"/profile/my-account\"\r\n    routerLinkActive=\"active\"\r\n  >\r\n    <i class=\"bi bi-credit-card-2-back\"></i>\r\n    Thông tin tài khoản\r\n  </li>\r\n  <li\r\n    class=\"itemChucNang pointer rounded\"\r\n    routerLink=\"/profile/my-discounts\"\r\n    routerLinkActive=\"active\"\r\n  >\r\n    <i class=\"bi bi-credit-card-2-back\"></i>\r\n    Mã ưu đãi của tôi\r\n  </li>\r\n  <li\r\n    class=\"itemChucNang pointer rounded\"\r\n    routerLink=\"/profile/my-orders\"\r\n    routerLinkActive=\"active\"\r\n  >\r\n    <i class=\"bi bi-box-seam\"></i>\r\n    Đơn hàng của tôi\r\n  </li>\r\n  <li\r\n    class=\"itemChucNang pointer rounded\"\r\n    routerLink=\"/profile/my-addresses\"\r\n    routerLinkActive=\"active\"\r\n  >\r\n    <i class=\"bi bi-geo-alt\"></i>\r\n    Sổ địa chỉ\r\n  </li>\r\n  <li\r\n    class=\"itemChucNang pointer rounded\"\r\n    routerLink=\"/profile/change-password\"\r\n    routerLinkActive=\"active\"\r\n  >\r\n    <i class=\"bi bi-shield-lock\"></i>\r\n    Đổi mật khẩu\r\n  </li>\r\n</ul>\r\n\r\n<app-overlay *ngIf=\"isLoadding\" [text]=\"overlayText\"></app-overlay>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}