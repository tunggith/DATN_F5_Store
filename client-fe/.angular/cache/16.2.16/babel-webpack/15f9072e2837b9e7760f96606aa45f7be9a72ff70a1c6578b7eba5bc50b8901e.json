{"ast":null,"code":"import { BehaviorSubject } from \"rxjs\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class CartService {\n  // constructor, ngOn\n  constructor(http) {\n    this.http = http;\n    this.apiUrl = \"http://localhost:8080/cart\";\n    this.cartItemsOfLoggedUser = new BehaviorSubject([]);\n    this.cartItemsQuantityOfLoggedUser = new BehaviorSubject(0);\n    this.cartItemsInLocalStorage = new BehaviorSubject([]);\n    this.cartItemsQuantityInLocalStorage = new BehaviorSubject(0);\n  }\n  ngOnInit() {}\n  // public functions\n  // 1\n  addCartItemToLocalStorage(cartItem) {\n    let cartItems = JSON.parse(localStorage.getItem(\"cartItems\"));\n    cartItems.push(cartItem);\n    localStorage.setItem(\"cartItems\", JSON.stringify(cartItems));\n    this.cartItemsInLocalStorage.next(cartItems);\n    this.cartItemsQuantityInLocalStorage.next(cartItems.length);\n  }\n  // 2\n  updateCartItemsInStorage(cartItems) {\n    localStorage.setItem(\"cartItems\", JSON.stringify(cartItems));\n    this.cartItemsInLocalStorage.next(cartItems);\n  }\n  updateCartItemsQuantityInStorage(quantity) {\n    this.cartItemsQuantityInLocalStorage.next(quantity);\n  }\n  // 4\n  getCartItemsOfLoggedCustomer(cusId) {\n    return this.http.get(`${this.apiUrl}/items/by-customer/${cusId}`);\n  }\n  // 5\n  getCartItemByCustomerAndProductDetails(cusId, proDetailsId) {\n    return this.http.get(`${this.apiUrl}/items/by-cus-details/${cusId}/${proDetailsId}`);\n  }\n  // 6\n  addCartItemForLoggedCus(req) {\n    return this.http.post(`${this.apiUrl}/items/add-cart-item`, req);\n  }\n  // 7\n  minusOrPlusCartItemQuantity(cartItemId, type) {\n    return this.http.get(`${this.apiUrl}/items/minus-plus-quantity/${cartItemId}/${type}`);\n  }\n  // 7\n  updateCartItemQuantity(cartItemId, newQuantity) {\n    return this.http.get(`${this.apiUrl}/items/update-quantity/${cartItemId}/${newQuantity}`);\n  }\n  // 8\n  deleteItemFromCart(cartItemId) {\n    return this.http.delete(`${this.apiUrl}/items/delete/${cartItemId}`);\n  }\n  // 9\n  updateCartItemsOfLoggedUser(cartItems) {\n    this.cartItemsOfLoggedUser.next(cartItems);\n  }\n  // 10\n  updateCartItemsQuantityOfLoggedUser(quantity) {\n    this.cartItemsQuantityOfLoggedUser.next(quantity);\n  }\n  static #_ = this.ɵfac = function CartService_Factory(t) {\n    return new (t || CartService)(i0.ɵɵinject(i1.HttpClient));\n  };\n  static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: CartService,\n    factory: CartService.ɵfac,\n    providedIn: \"root\"\n  });\n}","map":{"version":3,"names":["BehaviorSubject","CartService","constructor","http","apiUrl","cartItemsOfLoggedUser","cartItemsQuantityOfLoggedUser","cartItemsInLocalStorage","cartItemsQuantityInLocalStorage","ngOnInit","addCartItemToLocalStorage","cartItem","cartItems","JSON","parse","localStorage","getItem","push","setItem","stringify","next","length","updateCartItemsInStorage","updateCartItemsQuantityInStorage","quantity","getCartItemsOfLoggedCustomer","cusId","get","getCartItemByCustomerAndProductDetails","proDetailsId","addCartItemForLoggedCus","req","post","minusOrPlusCartItemQuantity","cartItemId","type","updateCartItemQuantity","newQuantity","deleteItemFromCart","delete","updateCartItemsOfLoggedUser","updateCartItemsQuantityOfLoggedUser","_","i0","ɵɵinject","i1","HttpClient","_2","factory","ɵfac","providedIn"],"sources":["E:\\Du_An_Tot_Nghiep\\DATN_F5_Store\\client-fe\\src\\app\\service\\cart.service.ts"],"sourcesContent":["import { HttpClient } from \"@angular/common/http\";\r\nimport { Injectable } from \"@angular/core\";\r\nimport { BehaviorSubject, Observable } from \"rxjs\";\r\n\r\nimport { CartItem } from \"../model/class/cart-item.class\";\r\nimport { AddCartItemReq } from \"../model/interface/add-cart-item-req.interface\";\r\n\r\n@Injectable({\r\n  providedIn: \"root\",\r\n})\r\nexport class CartService {\r\n  private readonly apiUrl = \"http://localhost:8080/cart\";\r\n\r\n  public cartItemsOfLoggedUser = new BehaviorSubject<CartItem[]>([]);\r\n  public cartItemsQuantityOfLoggedUser = new BehaviorSubject<number>(0);\r\n\r\n  public cartItemsInLocalStorage = new BehaviorSubject<CartItem[]>([]);\r\n  public cartItemsQuantityInLocalStorage = new BehaviorSubject<number>(0);\r\n\r\n  // constructor, ngOn\r\n  constructor(private http: HttpClient) {}\r\n\r\n  ngOnInit(): void {}\r\n\r\n  // public functions\r\n  // 1\r\n  public addCartItemToLocalStorage(cartItem: CartItem): void {\r\n    let cartItems = JSON.parse(localStorage.getItem(\"cartItems\"));\r\n    cartItems.push(cartItem);\r\n    localStorage.setItem(\"cartItems\", JSON.stringify(cartItems));\r\n\r\n    this.cartItemsInLocalStorage.next(cartItems);\r\n    this.cartItemsQuantityInLocalStorage.next(cartItems.length);\r\n  }\r\n\r\n  // 2\r\n  public updateCartItemsInStorage(cartItems: CartItem[]): void {\r\n    localStorage.setItem(\"cartItems\", JSON.stringify(cartItems));\r\n    this.cartItemsInLocalStorage.next(cartItems);\r\n  }\r\n\r\n  public updateCartItemsQuantityInStorage(quantity: number): void {\r\n    this.cartItemsQuantityInLocalStorage.next(quantity);\r\n  }\r\n\r\n  // 4\r\n  public getCartItemsOfLoggedCustomer(cusId: number): Observable<CartItem[]> {\r\n    return this.http.get<CartItem[]>(\r\n      `${this.apiUrl}/items/by-customer/${cusId}`\r\n    );\r\n  }\r\n\r\n  // 5\r\n  public getCartItemByCustomerAndProductDetails(\r\n    cusId: number,\r\n    proDetailsId: number\r\n  ): Observable<CartItem> {\r\n    return this.http.get<CartItem>(\r\n      `${this.apiUrl}/items/by-cus-details/${cusId}/${proDetailsId}`\r\n    );\r\n  }\r\n\r\n  // 6\r\n  public addCartItemForLoggedCus(req: AddCartItemReq): Observable<CartItem> {\r\n    return this.http.post<CartItem>(`${this.apiUrl}/items/add-cart-item`, req);\r\n  }\r\n\r\n  // 7\r\n  public minusOrPlusCartItemQuantity(\r\n    cartItemId: number,\r\n    type: string\r\n  ): Observable<CartItem> {\r\n    return this.http.get<CartItem>(\r\n      `${this.apiUrl}/items/minus-plus-quantity/${cartItemId}/${type}`\r\n    );\r\n  }\r\n\r\n  // 7\r\n  public updateCartItemQuantity(\r\n    cartItemId: number,\r\n    newQuantity: number\r\n  ): Observable<CartItem> {\r\n    return this.http.get<CartItem>(\r\n      `${this.apiUrl}/items/update-quantity/${cartItemId}/${newQuantity}`\r\n    );\r\n  }\r\n\r\n  // 8\r\n  public deleteItemFromCart(cartItemId: number): Observable<void> {\r\n    return this.http.delete<void>(`${this.apiUrl}/items/delete/${cartItemId}`);\r\n  }\r\n\r\n  // 9\r\n  public updateCartItemsOfLoggedUser(cartItems: CartItem[]): void {\r\n    this.cartItemsOfLoggedUser.next(cartItems);\r\n  }\r\n\r\n  // 10\r\n  public updateCartItemsQuantityOfLoggedUser(quantity: number): void {\r\n    this.cartItemsQuantityOfLoggedUser.next(quantity);\r\n  }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}